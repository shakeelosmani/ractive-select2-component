<html>
  <head>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/css/select2.min.css" rel="stylesheet" />
  </head>
  <body>
    <div id="dynamiccontainer">
      <script id="template" type="text/ractive">
        <select2 option="{{states}}" returnSelected="{{selectedItems}}"/>
        <select2 option="{{other}}" returnSelected="{{otherSelectedItems}}"/>
      </script>
    </div>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.6-rc.0/js/select2.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/ractive"></script>


    <script>
      Ractive.components['select2'] = Ractive.extend({
        template: '<select></select>',
        init: function() {
          var self = this;
          this.select2Elem = this.find('select');
        },
        observe: {
          option: function(val) {
            var that = this;
            setTimeout(function(){
              $(that.select2Elem).select2({data:val, width:'10%', theme:'classic'});
            }, 1);
          },
          returnSelected: function () {
            var that = this;
            setTimeout(function(){
              ractive.set(that.component.attributeByName['returnSelected'].model.key,$(that.select2Elem).select2('data'));
            }, 1);
          }
        }
      });

      var ractive = new Ractive({
        target: '#dynamiccontainer',
        template: '#template',
        data: {
          states: [
              {
                "id": 0,
                "text": "Select an option",
                "disabled":true,
                "selected":true
              },
              {
                "id": 1,
                "text": "Option 1"
              },
              {
                "id": 2,
                "text": "Option 2"
              },
              {
                "id": 3,
                "text": "Option 3"
              }
            ],
          other:[
              {
                "id": 0,
                "text": "Select an option",
                "disabled":true,
                "selected":true
              },
              {
                "id": 7,
                "text": "Option 7"
              },
              {
                "id": 8,
                "text": "Option 8"
              },
              {
                "id": 9,
                "text": "Option 9"
              }
          ]
        }
      });

    </script>
  </body>
</html>